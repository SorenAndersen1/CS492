# Assignment 2
**Due by 11:59pm on Monday, 2/8/2021** <br />
**Demo due by 11:59pm on Monday, 2/22/2021**

In this assignment, we'll continue working on our weather app, hooking it up to an HTTP API to fetch forecast data over the internet and using Intents to start new activities.  The parts of the assignment are outlined below.

## 1. Hook your app up to the OpenWeather API

This repository provides you with some starter code that displays hard-coded dummy forecast data in a `RecyclerView`-based list (i.e. a solution to assignment 1).  Your first task for this assignment is to write an `AsyncTask` to fetch forecast data from the OpenWeather API and to display that data in the `RecyclerView` instead of the dummy data.  You can find more info about the OpenWeather API here: https://openweathermap.org/api.  Here are some steps you can follow to get everything working for this part of the assignment:

  1. To be able to use the OpenWeather API, you'll first need to sign up for an OpenWeather API key here: http://openweathermap.org/appid.  Without this API key, you won't be able to make calls to the API.

  2. Write a utility method to construct the URL you'll use to query OpenWeather's [5-day forecast API](https://openweathermap.org/forecast5).  For this assignment, you'll query [by city name](https://openweathermap.org/forecast5#name5), so set your utility method up to accept a city name as an argument.  Don't forget include your API key as a query string parameter in the URL you construct.  The URL should also be set up to request JSON data from the API.  You may also want to set other API query parameters in your URL, as well, such as `units`, which controls the units of temperature, etc. returned by the API.  The documentation for the 5-day forecast API documentation describes all the API query parameters you can set in the URL.

  3. Implement a subclass of `AsyncTask` that fetches forecast data from the OpenWeather API using a URL generated by the method you implemented above.  For this assignment, you can just hard code the city for which you fetch data, e.g. "Corvallis,OR".  Your `AsyncTask` should have the following features:
      * It should display a `ProgressBar` while data is being fetched and hide the progress bar when fetching is complete.
      * It should display an error message if you were unable to successfully fetch data for some reason.

  4. Use [GSON](https://github.com/google/gson) to parse the JSON data returned by the OpenWeather API.  At a minimum, your app should extract (at a minimum) the following data for each entry in the returned JSON data:
      * The date/time.
      * The low temperature.
      * The high temperature.
      * The probability of precipitation.
      * The short textual description of the weather.

      The documentation for the 5-day forecast API [describes all the fields and the structure of the JSON response](https://openweathermap.org/forecast5#JSON).  Note that the structure of the JSON response is somewhat complex, and the fields containing the data listed above are at different levels and in different locations in the JSON response.  To be able to successfully parse out those fields, you'll likely need to set up a hierarchy of nested Java classes to use in conjunction with GSON.

  5. Send your parsed data from the `AsyncTask` into the `ForecastAdapter`, so it is displayed in the `RecyclerView`.  Depending on how you set up your parsing, you may need to make modifications to the `RecyclerView` framework to correctly display the new data.  For example, you may need to modify the layout representing one item in the `RecyclerView` list.  Other changes may be needed as well.

  6. Execute your `AsyncTask` from your main activity class's `onCreate()` method to fetch forecast data when the app starts.  Don't forget to set up the correct permissions to be able to make network calls from your app.

## 2. Use an Intent to start a new activity

Once you have your app hooked up to the OpenWeather API, change the app's behavior so that clicks on items in the `RecyclerView` list no longer display a Toast but instead navigate to a new activity that allows the user to view a "detailed" view of that forecast item.  To do this, you'll have to accomplish the following things:

  1. Create a new activity to represent the detailed view of the forecast item.  The layout for this activity should have elements to display all of the data fields associated with the forecast item.  The new activity should be an "empty" activity, i.e. a subclass of `AppCompatActivity` like our main activity.  Don't forget to make sure the new activity is correctly listed in `AndroidManifest.xml`.

  2. Once your new activity is created modify the click listener for the individual items in the `RecyclerView` to create a new explicit `Intent` that launches the new activity you just created.  Add the data object representing the clicked forecast item into the `Intent` as an extra so the new activity will have access to the data it needs to display the "detailed" view of that forecast item.

  3. Make sure your new activity is set up to grab the forecast data out of the `Intent` that launched it and to display that data.

## 3. Add some implicit intents

Finally, add the following features using implicit intents:

  1. Add an action to the action bar of the main activity that allows the user to see in a map the location for which the forecast is displayed.

  2. Add an action to the action bar of the "detailed" forecast activity that allows the user to share the "detailed" forecast text.  Your action should launch the Android Sharesheet to allow the user to select an app with which to share the forecast text.

## Extra credit: Kotlin implementation

For extra credit, you may implement this assignment using Kotlin instead of Java.  To earn this extra credit, you must still implement the app using the `AsyncTask`-based approach described above.  Note that you may have to replace some of the Java starter code with Kotlin to be able to implement the app described above.

## Submission

As usual, we'll be using GitHub Classroom for this assignment, and you will submit your assignment via GitHub.  Make sure your completed files are committed and pushed by the assignment's deadline to the master branch of the GitHub repo that was created for you by GitHub Classroom.  A good way to check whether your files are safely submitted is to look at the master branch your assignment repo on the github.com website (i.e. https://github.com/osu-cs492-w21/assignment-2-YourGitHubUsername/). If your changes show up there, you can consider your files submitted.

## Grading criteria

This assignment is worth 100 total points, broken down as follows:

  * 50 points: The app fetches and displays data from the OpenWeather API in the main activity's `RecyclerView`-based list

  * 30 points: The app uses an explicit intent to start a "detailed" forecast activity whenever the user clicks on an item in the forecast list

  * 20 points: The app uses implicit intents to launch other activities:
      * 10 points: The app includes an action in the main activity's action bar to allow the user to see the forecast location in a map
      * 10 points: The app includes an action in the "detailed" forecast activity's action bar to allow the user to share the text of the "detailed" forecast

You may also earn 10 points of extra credit for implementing your app using Kotlin.  Note that if you use Kotlin, your app will still be graded as normal based on the criteria described above.
